"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const resendEmailValidation_1 = require("./AuthServices/resendEmailOtp/resendEmailValidation");
const refreshToken_1 = require("./AuthServices/refreshToken/refreshToken");
const ConfirmEmailValidation_1 = require("./AuthServices/ConfirmEmailService/ConfirmEmailValidation");
const ConfirmEmail_1 = require("./AuthServices/ConfirmEmailService/ConfirmEmail");
const express_1 = require("express");
const SignUpValidation_1 = require("./AuthServices/SignUpService/SignUpValidation");
const ValidationMiddleware_1 = __importDefault(require("../../middleware/ValidationMiddleware"));
const SignUpService_1 = require("./AuthServices/SignUpService/SignUpService");
const resendEmailOtp_1 = require("./AuthServices/resendEmailOtp/resendEmailOtp");
const loginService_1 = require("./AuthServices/loginService/loginService");
const loginSchema_1 = require("./AuthServices/loginService/loginSchema");
const getUserProfile_1 = require("./AuthServices/getUserProfile/getUserProfile");
const authMiddleware_1 = require("../../middleware/authMiddleware");
const ForgetPassService_1 = require("./AuthServices/forgetPasswordService/ForgetPassService");
const resetForgetPass_1 = require("./AuthServices/resetForgetPasswordService/resetForgetPass");
const multer_1 = require("../../utils/multer/multer");
const Images_1 = require("./AuthServices/Upload/Images");
const SendFriendRequest_1 = require("./AuthServices/SendFriendRequest/SendFriendRequest");
const ChatController_1 = __importDefault(require("../chatModule/ChatController"));
const authRouter = (0, express_1.Router)();
authRouter.use('/:id/chat', ChatController_1.default);
const signUpService = new SignUpService_1.SignUpService();
authRouter.post('/signup', (0, ValidationMiddleware_1.default)(SignUpValidation_1.SignUpSchema), signUpService.signUp.bind(signUpService));
const ConfirmEmailService = new ConfirmEmail_1.ConfirmEmail();
authRouter.patch('/confirmEmail', (0, ValidationMiddleware_1.default)(ConfirmEmailValidation_1.ConfirmEmailSchema), ConfirmEmailService.ConfirmEmail.bind(ConfirmEmailService));
const resendEmailOtpService = new resendEmailOtp_1.resendOtpService();
authRouter.patch('/resendOtp', (0, ValidationMiddleware_1.default)(resendEmailValidation_1.resendEmailOtpSchema), resendEmailOtpService.resendEmailOtp.bind(resendEmailOtpService));
const login = new loginService_1.loginService();
authRouter.post('/login', (0, ValidationMiddleware_1.default)(loginSchema_1.loginSchema), login.loginService.bind(login));
const getUser = new getUserProfile_1.GetUserService();
authRouter.get('/me', authMiddleware_1.auth, getUser.getUserProfile.bind(getUser));
const refreshToken = new refreshToken_1.refreshTokenService();
authRouter.post('/refreshToken', refreshToken.refreshToken.bind(refreshToken));
const ForgetPassword = new ForgetPassService_1.ForgetPassService();
authRouter.patch('/forgetPassword', ForgetPassword.ForgetPass.bind(ForgetPassword));
const Reset_Password = new resetForgetPass_1.resetForgetPasswordService();
authRouter.patch('/reset_forget_Pass', Reset_Password.resetForgetPassword.bind(Reset_Password));
const ResendFriendRequest = new SendFriendRequest_1.SendFriendRequest();
authRouter.patch('/send-friend-request', authMiddleware_1.auth, ResendFriendRequest.FriendRequest.bind(ResendFriendRequest));
const AcceptFriendRequest = new SendFriendRequest_1.SendFriendRequest();
authRouter.patch('/accept-friend-request/:id', authMiddleware_1.auth, AcceptFriendRequest.AcceptFriendRequest.bind(AcceptFriendRequest));
const imagesController = new Images_1.ImagesController();
authRouter.patch('/Profile-Image', (0, multer_1.multerFile)({ storeIn: multer_1.StoreInEnum.memory }).single('image'), authMiddleware_1.auth, imagesController.uploadProfileImage);
authRouter.patch('/cover-Image', (0, multer_1.multerFile)({ storeIn: multer_1.StoreInEnum.memory }).array('images'), authMiddleware_1.auth, imagesController.uploadCoverImage);
exports.default = authRouter;
